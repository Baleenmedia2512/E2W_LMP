{
  "info": {
    "name": "E2W Lead Management System API",
    "description": "Production-ready Lead Management System with role-based access control",
    "version": "1.0.0",
    "contact": {
      "name": "E2W Development Team",
      "email": "dev@e2w.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://your-production-domain.vercel.app",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "Authentication and session management"
    },
    {
      "name": "Leads",
      "description": "Lead CRUD operations"
    },
    {
      "name": "Assignment",
      "description": "Lead assignment operations"
    },
    {
      "name": "Dashboard",
      "description": "Dashboard statistics and data"
    },
    {
      "name": "Calls",
      "description": "Call log management"
    },
    {
      "name": "Follow-ups",
      "description": "Follow-up scheduling and management"
    },
    {
      "name": "DSR",
      "description": "Daily Sales Report generation"
    },
    {
      "name": "Notifications",
      "description": "User notifications"
    },
    {
      "name": "Undo",
      "description": "Undo last action"
    }
  ],
  "paths": {
    "/api/auth/session": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get current user session",
        "description": "Returns the authenticated user's session information",
        "responses": {
          "200": {
            "description": "Session retrieved successfully"
          },
          "401": {
            "description": "Not authenticated"
          }
        }
      }
    },
    "/api/leads": {
      "get": {
        "tags": ["Leads"],
        "summary": "List leads",
        "description": "Get paginated list of leads with optional filters",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["new", "contacted", "qualified", "converted", "lost"] }
          },
          {
            "name": "source",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "search",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Leads retrieved successfully"
          }
        }
      },
      "post": {
        "tags": ["Leads"],
        "summary": "Create a new lead",
        "description": "Create a new lead record",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "phone", "source"],
                "properties": {
                  "name": { "type": "string" },
                  "phone": { "type": "string" },
                  "email": { "type": "string" },
                  "source": { "type": "string" },
                  "status": { "type": "string", "enum": ["new", "contacted", "qualified", "converted", "lost"] },
                  "priority": { "type": "string", "enum": ["low", "medium", "high"] }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead created successfully"
          },
          "400": {
            "description": "Validation error"
          },
          "403": {
            "description": "Forbidden - insufficient permissions"
          }
        }
      }
    },
    "/api/leads/{id}": {
      "get": {
        "tags": ["Leads"],
        "summary": "Get lead by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Lead retrieved successfully"
          },
          "404": {
            "description": "Lead not found"
          }
        }
      },
      "put": {
        "tags": ["Leads"],
        "summary": "Update lead",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Lead updated successfully"
          }
        }
      },
      "delete": {
        "tags": ["Leads"],
        "summary": "Delete lead",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Lead deleted successfully"
          }
        }
      }
    },
    "/api/assign": {
      "post": {
        "tags": ["Assignment"],
        "summary": "Manually assign lead to agent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["leadId", "assignedToId"],
                "properties": {
                  "leadId": { "type": "string" },
                  "assignedToId": { "type": "string" },
                  "reason": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead assigned successfully"
          }
        }
      },
      "get": {
        "tags": ["Assignment"],
        "summary": "Auto-assign unassigned leads",
        "description": "Automatically assigns unassigned leads to available agents",
        "responses": {
          "200": {
            "description": "Leads auto-assigned successfully"
          }
        }
      }
    },
    "/api/dashboard": {
      "get": {
        "tags": ["Dashboard"],
        "summary": "Get dashboard statistics",
        "description": "Returns dashboard data including stats, recent leads, and today's follow-ups",
        "responses": {
          "200": {
            "description": "Dashboard data retrieved successfully"
          }
        }
      }
    },
    "/api/calls": {
      "get": {
        "tags": ["Calls"],
        "summary": "List call logs",
        "parameters": [
          {
            "name": "leadId",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Call logs retrieved successfully"
          }
        }
      },
      "post": {
        "tags": ["Calls"],
        "summary": "Create call log",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["leadId", "startedAt"],
                "properties": {
                  "leadId": { "type": "string" },
                  "startedAt": { "type": "string", "format": "date-time" },
                  "endedAt": { "type": "string", "format": "date-time" },
                  "remarks": { "type": "string" },
                  "callStatus": { "type": "string", "enum": ["answered", "not_answered", "busy", "invalid"] }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Call log created successfully"
          }
        }
      }
    },
    "/api/followups": {
      "get": {
        "tags": ["Follow-ups"],
        "summary": "List follow-ups",
        "responses": {
          "200": {
            "description": "Follow-ups retrieved successfully"
          }
        }
      },
      "post": {
        "tags": ["Follow-ups"],
        "summary": "Schedule follow-up",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["leadId", "scheduledAt"],
                "properties": {
                  "leadId": { "type": "string" },
                  "scheduledAt": { "type": "string", "format": "date-time" },
                  "notes": { "type": "string" },
                  "priority": { "type": "string", "enum": ["low", "medium", "high"] }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Follow-up scheduled successfully"
          }
        }
      }
    },
    "/api/dsr": {
      "get": {
        "tags": ["DSR"],
        "summary": "Generate DSR report",
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "exportType",
            "in": "query",
            "schema": { "type": "string", "enum": ["individual", "team"], "default": "individual" }
          }
        ],
        "responses": {
          "200": {
            "description": "DSR generated successfully"
          }
        }
      }
    },
    "/api/notifications": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Get notifications",
        "parameters": [
          {
            "name": "unreadOnly",
            "in": "query",
            "schema": { "type": "boolean" }
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications retrieved successfully"
          }
        }
      },
      "put": {
        "tags": ["Notifications"],
        "summary": "Mark notification as read",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "notificationId": { "type": "string" },
                  "markAllRead": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Notification updated successfully"
          }
        }
      }
    },
    "/api/undo": {
      "get": {
        "tags": ["Undo"],
        "summary": "Get available undo actions",
        "responses": {
          "200": {
            "description": "Undo actions retrieved successfully"
          }
        }
      },
      "post": {
        "tags": ["Undo"],
        "summary": "Undo last action",
        "description": "Undo the most recent action within 60 seconds",
        "responses": {
          "200": {
            "description": "Action undone successfully"
          },
          "400": {
            "description": "No action available to undo"
          }
        }
      }
    }
  }
}
